# Qt串口通信系统（上位机 + STM32下位机）

## 项目简介
这是一个完整的串口通信系统解决方案，包含基于Qt开发的上位机程序和基于STM32的下位机程序。该项目实现了PC与STM32单片机之间的双向数据通信功能。

## 系统架构
### 上位机（Qt程序）
- 基于Qt框架开发的串口通信界面
- 提供图形化操作界面
- 实现串口数据的收发和显示
- 支持串口参数配置

### 下位机（STM32程序）
- 基于STM32F103系列单片机
- 使用HAL库开发
- 实现UART通信协议
- 支持数据采集和处理

## 功能特点
### 上位机功能
- 串口参数配置（波特率、数据位、停止位、校验位等）
- 串口数据发送功能
- 串口数据接收显示
- 实时串口状态监控
- 支持多种数据格式（HEX、ASCII）

### 下位机功能
- UART通信协议实现
- 数据采集和处理
- LED状态指示
- 串口数据解析和响应

## 开发环境
### 上位机环境
- Qt 5.x
- 操作系统：Windows/Linux
- 编译器：MinGW/GCC

### 下位机环境
- Keil MDK 5.x
- STM32CubeMX
- STM32 HAL库
- ST-Link调试器

## 项目结构 
```
Qt_Serial_Port_ui/
├── Serial_port_ui/    # Qt上位机项目目录
│   ├── src/          # 源代码
│   ├── include/      # 头文件
│   └── ui/           # 界面文件
├── STM32_Code/       # STM32下位机程序
│   ├── Core/         # 核心代码
│   ├── Drivers/      # 驱动文件
│   └── MDK-ARM/      # Keil工程文件
├── Software/         # 相关软件和工具
├── Hardware/         # 硬件设计文件
├── Doc/             # 项目文档
├── LICENSE          # GPL-3.0许可证
└── README.md        # 项目说明文档
```

## 编译与运行
### 上位机编译
1. 确保已安装Qt开发环境
2. 使用Qt Creator打开Serial_port_ui目录下的项目文件
3. 编译并运行项目

### 下位机编译
1. 使用Keil MDK打开STM32_Code/MDK-ARM目录下的工程文件
2. 编译工程
3. 使用ST-Link下载程序到STM32开发板

## 硬件连接
1. STM32开发板通过USB转串口模块与电脑连接
2. 连接示意图：
   - PC_USB <-> USB转串口模块 <-> STM32开发板
   - STM32 USART引脚定义：
     * PA9 - USART1_TX
     * PA10 - USART1_RX

## 使用说明
1. 运行上位机程序，选择正确的串口号
2. 配置串口参数（默认波特率115200，8数据位，1停止位，无校验）
3. 点击打开串口按钮
4. 即可进行数据收发操作

## 通信协议
数据帧格式：
```
$数据1,数据2,数据3,...,数据n*
```
- 帧头：固定为 `$`
- 数据：浮点数类型（f），使用逗号`,`分隔
- 帧尾：固定为 `*`

数据流解析器配置：
```c
// 串口解析器初始化参数
帧头符号: "$"
帧尾符号: "*"
分隔符: ","
数据类型: "f"（浮点数）
```

示例数据帧：
```
$123.45,67.89,0.123,456.789*
```

## 技术栈
- C/C++ (97.8%)
- Qt框架
- STM32 HAL库
- Makefile (1.9%)
- CMake (0.1%)
- 汇编语言 (0.1%)

## 许可证
本项目采用 [GPL-3.0](LICENSE) 许可证

## 贡献指南
欢迎提交Issue和Pull Request来完善项目。

## 作者
- [jump0knight](https://github.com/jump0knight) - Qt上位机开发
- [Z1R343L-D77](https://github.com/Z1R343L-D77) - STM32下位机开发

## 项目状态
- [x] 基础串口通信功能
- [x] 用户界面
- [x] STM32程序开发
- [ ] 数据记录功能
- [ ] 自动重连功能
- [ ] 协议优化升级
